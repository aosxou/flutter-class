# Bamtol Market 로그인 / 회원가입 기능 정리

---

## 개요
Bamtol Market 앱의 로그인 및 회원 인증 기능은  
GetX 상태 관리(`GetX Controller`) 기반으로 구현되었으며,  
앱 실행 시 인증 상태에 따라 로그인 화면 또는 메인 화면으로 이동하도록 설계되었습니다.

---

## 관련 파일 구조

lib/

└── src/common/controller/

└── authentication_controller.dart

└── src/user/

└── login/page/login_page.dart

└── login/controller/login_controller.dart


##  AuthenticationController 구조

```dart
class AuthenticationController extends GetxController {
  static AuthenticationController get to => Get.find();

  Rx<AuthenticationStatus> status = AuthenticationStatus.init.obs;
  Rxn<UserModel> userModel = Rxn<UserModel>();
}
```

# 로그인 상태 관리
## AuthenticationStatus Enum 구성

```dart
enum AuthenticationStatus {
  init,
  unknown,
  authentication
}
```
| 상태             | 설명         |
| -------------- | ---------- |
| init           | 앱 초기 로딩    |
| unknown        | 로그인 안 된 상태 |
| authentication | 로그인 완료 상태  |

# authCheck() - 앱 시작 시 로그인 체크

```dart
void authCheck() async {
  await Future.delayed(const Duration(milliseconds: 500));
  status(AuthenticationStatus.unknown);
}
```

## 역할

앱 시작 후 0.5초 대기

로그인 화면으로 이동하도록 상태 변경

# login() - 로그인 성공 처리

```dart
void login() {
  userModel(const UserModel(uid: 'test_user', nickname: '테스트유저'));
  status(AuthenticationStatus.authentication);
}
```

## 역할

사용자 데이터 생성

인증 완료 상태(authentication) 설정

# logout() - 로그아웃 처리

```dart
void logout() async {
  status(AuthenticationStatus.unknown);
  userModel(null);
  Get.offAllNamed('/login');
}
```

## 역할

상태 초기화

사용자 정보 삭제

로그인 페이지로 강제 이동

## 요약

| 항목     | 적용 기술                    |
| ------ | ------------------------ |
| 상태관리   | GetX                     |
| 로그인 처리 | AuthenticationController |
| 사용자 관리 | Rx<UserModel>            |
| 이동 처리  | Get.offAllNamed()        |
| 인증 분기  | Rx<AuthenticationStatus> |


## authentication_controller 전체 코드

```dart
import 'package:bamtol_market_app/src/common/enum/authentication_status.dart';
import 'package:bamtol_market_app/src/user/model/user_model.dart';
import 'package:get/get.dart';

class AuthenticationController extends GetxController {
  static AuthenticationController get to => Get.find();
  
  AuthenticationController();

  Rx<AuthenticationStatus> status = AuthenticationStatus.init.obs;
  Rxn<UserModel> userModel = Rxn<UserModel>();

  void authCheck() async {
    // 앱 시작 시 로그인 페이지로 이동하도록 unknown 상태로 설정
    await Future.delayed(const Duration(milliseconds: 500));
    status(AuthenticationStatus.unknown);
  }

  void login() {
    // 로그인 성공 시 호출
    userModel(const UserModel(uid: 'test_user', nickname: '테스트유저'));
    status(AuthenticationStatus.authentication);
  }

  void reload() {
    // 테스트용
  }

  void logout() async {
    status(AuthenticationStatus.unknown);
    userModel(null);
    Get.offAllNamed('/login');
  }
}

```


# init_Start_page 전체 코드

```dart
import 'package:bamtol_market_app/src/common/components/app_font.dart';
import 'package:bamtol_market_app/src/common/components/btn.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';

class InitStartPage extends StatelessWidget {
  final Function() onStart;
  const InitStartPage({super.key, required this.onStart});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            SizedBox(
              width: 99,
              height: 116,
              child: Image.asset(
                'assets/images/logo_simbol.png',
              ),
            ),
            const SizedBox(height: 40),
            const AppFont(
              '당신 근처의 밤톨마켓',
              fontWeight: FontWeight.bold,
              size: 20,
            ),
            const SizedBox(height: 15),
            AppFont(
              '중고 거래부터 동네 정보까지, \n지금 내 동네를 선택하고 시작해보세요!',
              align: TextAlign.center,
              size: 18,
              color: Colors.white.withOpacity(0.6),
            )
          ],
        ),
      ),
      bottomNavigationBar: Padding(
        padding: EdgeInsets.only(
            left: 25, right: 25, bottom: 25 + Get.mediaQuery.padding.bottom),
        child: Btn(
          onTap: onStart,
          child: const AppFont(
            '시작하기',
            align: TextAlign.center,
            size: 18,
            fontWeight: FontWeight.bold,
          ),
        ),
      ),
    );
  }
}
```
## bottom_nav_controller 전체 코드

```dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';

class BottomNavController extends GetxController
    with GetTickerProviderStateMixin {
  late TabController tabController;
  RxInt menuIndex = 0.obs;

  @override
  void onInit() {
    super.onInit();
    tabController = TabController(length: 5, vsync: this);
  }

  void changeBottomNav(int index) {
    menuIndex(index);
    tabController.animateTo(index);
  }
}
```

## common_layout_controller 전체 코드

```dart
import 'package:get/get.dart';

class CommonLayoutController extends GetxController {
  static CommonLayoutController get to => Get.find();
  RxBool isLoading = false.obs;

  void loading(bool state) {
    isLoading(state);
  }
}
```


## data_load_controller

```dart
import 'package:get/get.dart';

class DataLoadController extends GetxController {
  RxBool isDataLoad = false.obs;

  void loadData() async {
    await Future.delayed(const Duration(milliseconds: 2000));
    isDataLoad(true);
  }
}
```
